<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Good Tech Dashboard</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="/static/js/script.js"></script>
    <script>
        // Make supabaseClient available globally
        window.supabaseClient = supabaseClient;
    </script>
    <script src="/static/js/components/AddContentButton.js"></script>
</head>

<body>
    <div class="dashboard">
        <header>
            <h1>Good Tech Dashboard</h1>
            <p>Aggregating positive tech news and insights</p>
        </header>

        <main>
            <section class="widget news-widget">
                <h2>Reddit Success Stories</h2>
                <div id="newsContainer" class="news-container">
                    <div class="loading">Loading news...</div>
                </div>
            </section>

            <section class="widget rss-widget two-col">
                <h2>Tech RSS Feed</h2>
                <div id="rssFeedContainer" class="news-container">
                    <div class="loading">Loading RSS feed...</div>
                </div>
            </section>

            <section class="widget ai-widget">
                <h2>AI Insights</h2>
                <div class="input-group">
                    <textarea id="question" rows="3" placeholder="Ask about the tech news..."></textarea>
                    <div class="button-groups">
                        <div class="button-group primary-ai">
                            <h3>Primary AI Services</h3>
                            <div class="buttons">
                                <button onclick="askAI('perplexity')" class="btn btn-perplexity">Ask Perplexity</button>
                                <button onclick="askAI('openai')" class="btn btn-openai">Ask OpenAI</button>
                            </div>
                        </div>
                        <!-- <div class="button-group sentiment-ai">
                            <h3>Sentiment Analysis</h3>
                            <div class="buttons">
                                <button onclick="askAI('grok')" class="btn btn-grok">Ask Grok</button>
                                <button onclick="askAI('deepseek')" class="btn btn-deepseek">Ask DeepSeek</button>
                            </div>
                        </div> -->
                    </div>
                </div>
                <div id="response" class="response-container hidden">
                    <div class="response-boxes">
                        <div class="response-box">
                            <h4>Raw Response</h4>
                            <textarea id="rawResponse" class="response-textarea" rows="10" placeholder="Paste your raw response here or wait for Perplexity response...">${EXAMPLE_RAW_RESPONSE}</textarea>
                        </div>
                        <div class="response-box">
                            <h4>Analysis Prompt</h4>
                            <textarea id="analysisPrompt" class="response-textarea" rows="10" placeholder="Edit this analysis prompt as needed...">${ANALYSIS_INSTRUCTIONS}</textarea>
                        </div>
                    </div>
                    <div class="button-row">
                        <button onclick="analyzeWithAI('grok')" class="btn btn-grok">Analyze with Grok</button>
                        <button onclick="analyzeWithAI('deepseek')" class="btn btn-deepseek">Analyze with DeepSeek</button>
                    </div>
                    <div id="analysisResults"></div>
                </div>
            </section>

            <section class="widget stats-widget">
                <h2>Tech Industry Stats</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Job Openings</h3>
                        <div id="jobCount" class="stat-value">Loading...</div>
                    </div>
                    <div class="stat-card">
                        <h3>Recent Funding</h3>
                        <div id="fundingAmount" class="stat-value">Loading...</div>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>
</html>